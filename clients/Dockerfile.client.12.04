FROM ubuntu:12.04

LABEL org.opencontainers.image.title="Ubuntu Landscape Client"
LABEL org.opencontainers.image.description="Ubuntu Landscape Client for connecting Ubuntu systems to Landscape Server for centralized management"
LABEL org.opencontainers.image.source="https://github.com/lusky3/Ubuntu-Landscape-Server-Docker"
LABEL org.opencontainers.image.url="https://ubuntu.com/landscape"
LABEL org.opencontainers.image.licenses="AGPL-3.0"

ENV DEBIAN_FRONTEND=noninteractive

RUN sed -i -e 's|http://archive.ubuntu.com/ubuntu|http://old-releases.ubuntu.com/ubuntu|g' /etc/apt/sources.list && \
    apt-get update && \
    apt-get install -y --no-install-recommends \
      landscape-client \
      ca-certificates && \
    rm -rf /var/lib/apt/lists/*

COPY client-entrypoint.sh /usr/local/bin/entrypoint.sh
RUN chmod +x /usr/local/bin/entrypoint.sh

ENTRYPOINT ["/usr/local/bin/entrypoint.sh"]
CMD ["sleep", "infinity"]
